spack:
  specs:
  - cmake
  - pkgconfig
  - mochi-thallium ^mercury~boostsys~checksum ^libfabric fabrics=tcp,rxm
  - nlohmann-json
  - spdlog
  - fmt
  - tclap
  - mochi-bedrock-module-api
  - python
  - py-pybind11
  - py-mochi-margo
  - py-coverage
  concretizer:
    unify: true
    reuse: true
  modules:
    prefix_inspections:
      lib: [LD_LIBRARY_PATH]
      lib64: [LD_LIBRARY_PATH]
# # Uncomment the lines below to enable the build cache
#  mirrors:
#    mochi-buildcache:
#      url: oci://ghcr.io/mochi-hpc/mochi-spack-buildcache
#      signed: false
#  config:
#    install_tree:
#      padded_length: 128
  packages:
    mochi-margo:
      require: "@0.15.0:"
    mochi-thallium:
      require: "@0.12.0:"
    mochi-bedrock-module-api:
      require: "@0.2.1:"
    python:
      # we force 3.12 to avoid a conflict with the version of Python installed on the github runners
      require: "@3.12.12"
